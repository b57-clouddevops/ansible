- name: Demo on using shell Module  
  hosts: all 
  tasks: 
    - name: Running uptime time 
      ansible.builtin.shell: uptime  
      register: OUT

    - name: Pritning uptime time 
      ansible.builtin.debug:
        msg: "uptime is {{OUT.stdout}}" 
    
    - name: Capturing the bash exit code 
      ansible.builtin.set_fact:
        EXITCODE: "{{OUT.rc}}"
    
    - name: Printing the exit code of bash 
      ansible.builtin.debug:
        msg: "Exit Code is {{EXITCODE}}"    